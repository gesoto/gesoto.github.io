<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<style>
		body {
			background: #fff;
			padding: 0;
			margin: 0;
			overflow: hidden;
		}

		.laytop {
			position: absolute;
			background-color: rgba(0, 0, 0, 0.9);
			width: 100%;
			height: 100%;
		}

		.abc {
			color: rgb(199, 199, 199);
			font-family: Helvetica;
			font-size: 26px;
			font-weight: 400;
			position: absolute;
			margin: 10%;
			top: 20%;
		}

		.a {
			font-size: 60px;
			font-weight: 600;
		}

		.b {
			font-size: 30px;
		}
	</style>
</head>

<body>

	<div class="laytop"></div>
	<div class="abc">
		<div class="a">Hello,</div>
		<div class="b">and welcome</div><br>My name is Salvador Soto, I like <span id="ttl"></span>
	</div>

	<script src="js/type.js"></script>
	<script src="js/three.js"></script>
	<script src="js/shaders/CopyShader.js"></script>
	<script src="js/shaders/DotScreenShader.js"></script>
	<script src="js/shaders/RGBShiftShader.js"></script>
	<script src="js/postprocessing/EffectComposer.js"></script>
	<script src="js/postprocessing/RenderPass.js"></script>
	<script src="js/postprocessing/ShaderPass.js"></script>

	<script>

		var camera, scene, renderer, stats, group;

		var mouseX = 0, mouseY = 0;

		var windowHalfX = window.innerWidth / 2;
		var windowHalfY = window.innerHeight / 2;

		init();
		animate();

		function init() {

			camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 10000);
			camera.position.z = 500;

			scene = new THREE.Scene();
			scene.background = new THREE.Color(0x000000);
			scene.fog = new THREE.Fog(0xffffff, 1, 10000);

			var geometry = new THREE.BoxBufferGeometry(100, 100, 100);
			var material = new THREE.MeshNormalMaterial();

			group = new THREE.Group();

			for (var i = 0; i < 1000; i++) {

				var mesh = new THREE.Mesh(geometry, material);
				mesh.position.x = Math.random() * 2000 - 1000;
				mesh.position.y = Math.random() * 2000 - 1000;
				mesh.position.z = Math.random() * 2000 - 1000;

				mesh.rotation.x = Math.random() * 2 * Math.PI;
				mesh.rotation.y = Math.random() * 2 * Math.PI;

				mesh.matrixAutoUpdate = false;
				mesh.updateMatrix();

				group.add(mesh);

			}

			scene.add(group);

			//

			renderer = new THREE.WebGLRenderer({ antialias: true });
			renderer.setPixelRatio(window.devicePixelRatio);
			renderer.setSize(window.innerWidth, window.innerHeight);
			document.body.appendChild(renderer.domElement);

			// postprocessing

			composer = new THREE.EffectComposer(renderer);
			composer.addPass(new THREE.RenderPass(scene, camera));

			var effect = new THREE.ShaderPass(THREE.DotScreenShader);
			effect.uniforms['scale'].value = 2;
			composer.addPass(effect);

			var effect = new THREE.ShaderPass(THREE.RGBShiftShader);
			effect.uniforms['amount'].value = 0.0015;
			effect.renderToScreen = true;
			composer.addPass(effect);

			//
			
			document.addEventListener( 'mousemove', onDocumentMouseMove, false );
			window.addEventListener('resize', onWindowResize, false);

		}

		function onWindowResize() {

			windowHalfX = window.innerWidth / 2;
			windowHalfY = window.innerHeight / 2;

			camera.aspect = window.innerWidth / window.innerHeight;
			camera.updateProjectionMatrix();

			renderer.setSize(window.innerWidth, window.innerHeight);

		}

		function onDocumentMouseMove(event) {

			mouseX = (event.clientX - windowHalfX) * 1;
			mouseY = (event.clientY - windowHalfY) * 1;

		}

		//

		function animate() {

			requestAnimationFrame(animate);

			render();
			stats.update();

		}

		function render() {

			var time = Date.now() * 0.001;

			var rx = Math.sin(time * 0.7) * 0.2,
				ry = Math.sin(time * 0.3) * 0.2,
				rz = Math.sin(time * 0.2) * 0.2;

			camera.position.x += (mouseX - camera.position.x) * 0.01;
			camera.position.y += (- mouseY - camera.position.y) * 0.01;

			camera.lookAt(scene.position);

			group.rotation.x = rx;
			group.rotation.y = ry;
			group.rotation.z = rz;

			composer.render(scene, camera);
			// renderer.render(scene, camera);

		}

	</script>

</body>

</html>